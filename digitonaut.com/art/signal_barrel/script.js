(function() {
  ///////////////////////////////////#
  // VARS
  var Tube, Webgl, animate, animation, binormal, gui, init, lookAhead, normal, resizeHandler, scale, tubeGeometry, webgl;

  webgl = null;

  gui = null;

  animation = true;

  lookAhead = true;

  tubeGeometry = null;

  scale = 10;

  binormal = new THREE.Vector3();

  normal = new THREE.Vector3();

  ///////////////////////////////////#
  // MAIN + INIT
  init = function() {
    webgl = new Webgl(window.innerWidth, window.innerHeight);
    $('.three').append(webgl.renderer.domElement);
    //gui = new (dat.GUI)
    //gui.close()
    $(window).on('resize', resizeHandler);
    return animate();
  };

  resizeHandler = function() {
    return webgl.resize(window.innerWidth, window.innerHeight);
  };

  animate = function() {
    requestAnimationFrame(animate);
    return webgl.render();
  };

  $(document).ready(init);

  ///////////////////////////////////
  // Three.js Scene Basics
  Webgl = (function() {
    Webgl = function(width, height) {
      var bluriness;
      // Basic three.js setup
      this.scene = new (THREE.Scene)();
      // scene cam
      this.camera = new THREE.PerspectiveCamera(50, width / height, 1, 10000);
      this.camera.position.z = 100;
      
      //spline cam
      this.splineCamera = new THREE.PerspectiveCamera(85, width / height, 0.01, 1000);
      this.scene.add(this.splineCamera);
      
      // the renderer
      this.renderer = new THREE.WebGLRenderer({
        antialias: true
      });
      this.renderer.setPixelRatio(window.devicePixelRatio);
      this.renderer.setSize(width, height);
      this.renderer.setClearColor(0x000000);
      
      // add the tooooob
      this.tube = new Tube();
      this.tube.position.set(0, 0, 0);
      this.tube.scale.set(scale, scale, scale);
      this.scene.add(this.tube);
      
      // setup post-processing
      this.renderer.autoClear = false;
      this.composer = new THREE.EffectComposer(this.renderer);
      this.composer.addPass(new THREE.RenderPass(this.scene, this.splineCamera));
      
      // add a bleach pass
      this.shaderEffect = new THREE.ShaderPass(THREE.BleachBypassShader);
      this.shaderEffect.uniforms["opacity"].value = 0.95;
      this.composer.addPass(this.shaderEffect);
      
      // add a bloom pass
      this.bloomEffect = new THREE.BloomPass(2.5);
      this.composer.addPass(this.bloomEffect);
      
      // add a horz tilt shift pass
      bluriness = 1.5;
      this.hTiltPass = new THREE.ShaderPass(THREE.HorizontalTiltShiftShader);
      this.hTiltPass.uniforms['h'].value = bluriness / (0.75 * width);
      this.hTiltPass.uniforms['r'].value = 0.5;
      this.composer.addPass(this.hTiltPass);
      
      // add a vert title shift pass
      this.vTiltPass = new THREE.ShaderPass(THREE.VerticalTiltShiftShader);
      this.vTiltPass.uniforms['v'].value = bluriness / (0.75 * width);
      this.vTiltPass.uniforms['r'].value = 0.5;
      this.composer.addPass(this.vTiltPass);
      
      // @bokehPass = new THREE.BokehPass( @scene, @splineCamera, {
      //   focus: 1.0
      //   aperture: 0.025
      //   maxblur: 1.0
      //   width: width
      //   height: height
      // })
      // @composer.addPass @bokehPass

      // add a film pass
      this.filmPass = new THREE.FilmPass(0.25, 0.25, 2048, false);
      
      // render to screen so we can see something
      this.filmPass.renderToScreen = true;
      this.composer.addPass(this.filmPass);
    };
    Webgl.prototype.resize = function(width, height) {
      this.camera.aspect = width / height;
      this.camera.updateProjectionMatrix();
      this.renderer.setSize(width, height);
    };
    Webgl.prototype.render = function() {
      var dir, lookAt, looptime, offset, pick, pickNext, pickt, pos, segments, t, time;
      // Animate Camera Along Spline
      time = Date.now();
      looptime = 25 * 1000;
      t = time % looptime / looptime;
      pos = tubeGeometry.parameters.path.getPointAt(t);
      pos.multiplyScalar(scale);
      
      // interpolation
      segments = tubeGeometry.tangents.length;
      pickt = t * segments;
      pick = Math.floor(pickt);
      pickNext = (pick + 1) % segments;
      binormal.subVectors(tubeGeometry.binormals[pickNext], tubeGeometry.binormals[pick]);
      binormal.multiplyScalar(pickt - pick).add(tubeGeometry.binormals[pick]);
      dir = tubeGeometry.parameters.path.getTangentAt(t);
      offset = 5;
      normal.copy(binormal).cross(dir);
      
      // We move on a offset on its binormal
      pos.add(normal.clone().multiplyScalar(offset));
      this.splineCamera.position.copy(pos);
      
      // Using arclength for stablization in look ahead.
      lookAt = tubeGeometry.parameters.path.getPointAt((t + 30 / tubeGeometry.parameters.path.getLength()) % 1).multiplyScalar(scale);
      if (!lookAhead) {
        lookAt.copy(pos).add(dir);
      }
      this.splineCamera.matrix.lookAt(this.splineCamera.position, lookAt, normal);
      this.splineCamera.rotation.setFromRotationMatrix(this.splineCamera.matrix, this.splineCamera.rotation.order);
      this.renderer.render(this.scene, animation === true ? this.splineCamera : this.camera);
      if (this.composer) {
        this.composer.render();
      }
    };
    return Webgl;
  })();

  ///////////////////////////////////
  // TOOOOOB
  Tube = (function() {
    Tube = function() {
      var alphaTexture, closed, extrudePath, gridTexture, radiusSegments, repeatX, segments, texture;
      THREE.Object3D.call(this);
      extrudePath = new THREE.Curves.TrefoilKnot();
      segments = 200;
      radiusSegments = 20;
      repeatX = 10;
      closed = true;
      tubeGeometry = new THREE.TubeGeometry(extrudePath, segments, 4, radiusSegments, closed);
      THREE.ImageUtils.crossOrigin = '';
      texture = THREE.ImageUtils.loadTexture("https://s3-us-west-2.amazonaws.com/s.cdpn.io/21693/grid-two-two.png");
      texture.minFilter = THREE.NearestFilter;
      texture.wrapS = THREE.RepeatWrapping;
      texture.repeat.x = repeatX;
      alphaTexture = THREE.ImageUtils.loadTexture("https://s3-us-west-2.amazonaws.com/s.cdpn.io/21693/grid-two-two-alpha.png");
      alphaTexture.minFilter = THREE.NearestFilter;
      alphaTexture.wrapS = THREE.RepeatWrapping;
      alphaTexture.repeat.x = repeatX;
      gridTexture = THREE.ImageUtils.loadTexture("https://s3-us-west-2.amazonaws.com/s.cdpn.io/21693/wire-grid.png");
      gridTexture.minFilter = THREE.NearestFilter;
      gridTexture.wrapS = THREE.RepeatWrapping;
      gridTexture.repeat.x = repeatX;
      this.mesh = THREE.SceneUtils.createMultiMaterialObject(tubeGeometry, [
        new THREE.MeshBasicMaterial({
          side: THREE.DoubleSide,
          map: gridTexture,
          //alphaMap: gridTexture
          transparent: true
        }),
        new THREE.MeshBasicMaterial({
          color: 0xB0E6E1,
          side: THREE.BackSide,
          map: texture,
          //alphaMap: alphaTexture
          transparent: false
        })
      ]);
      return this.add(this.mesh);
    };
    Tube.prototype = new (THREE.Object3D)();
    Tube.prototype.constructor = Tube;
    Tube.prototype.update = function() {};
    //@mesh.rotation.y += 0.01
    return Tube;
  })();

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiPGFub255bW91cz4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ007RUFBQTs7QUFBQSxNQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsT0FBQSxFQUFBLFNBQUEsRUFBQSxRQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxTQUFBLEVBQUEsTUFBQSxFQUFBLGFBQUEsRUFBQSxLQUFBLEVBQUEsWUFBQSxFQUFBOztFQUVOLEtBQUEsR0FBUTs7RUFDUixHQUFBLEdBQVE7O0VBRVIsU0FBQSxHQUFZOztFQUNaLFNBQUEsR0FBWTs7RUFFWixZQUFBLEdBQWU7O0VBQ2YsS0FBQSxHQUFROztFQUNSLFFBQUEsR0FBVyxJQUFJLEtBQUssQ0FBQyxPQUFWLENBQUE7O0VBQ1gsTUFBQSxHQUFTLElBQUksS0FBSyxDQUFDLE9BQVYsQ0FBQSxFQVhIOzs7O0VBZ0JOLElBQUEsR0FBTyxRQUFBLENBQUEsQ0FBQTtJQUNMLEtBQUEsR0FBUSxJQUFJLEtBQUosQ0FBVSxNQUFNLENBQUMsVUFBakIsRUFBNkIsTUFBTSxDQUFDLFdBQXBDO0lBQ1IsQ0FBQSxDQUFFLFFBQUYsQ0FBVyxDQUFDLE1BQVosQ0FBbUIsS0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFsQyxFQURGOzs7SUFJRSxDQUFBLENBQUUsTUFBRixDQUFTLENBQUMsRUFBVixDQUFhLFFBQWIsRUFBdUIsYUFBdkI7V0FDQSxPQUFBLENBQUE7RUFOSzs7RUFRUCxhQUFBLEdBQWdCLFFBQUEsQ0FBQSxDQUFBO1dBQ2QsS0FBSyxDQUFDLE1BQU4sQ0FBYSxNQUFNLENBQUMsVUFBcEIsRUFBZ0MsTUFBTSxDQUFDLFdBQXZDO0VBRGM7O0VBR2hCLE9BQUEsR0FBVSxRQUFBLENBQUEsQ0FBQTtJQUNSLHFCQUFBLENBQXNCLE9BQXRCO1dBQ0EsS0FBSyxDQUFDLE1BQU4sQ0FBQTtFQUZROztFQUlWLENBQUEsQ0FBRSxRQUFGLENBQVcsQ0FBQyxLQUFaLENBQWtCLElBQWxCLEVB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LE9BRkw7O1VBSUEsV0FBQSxFQUFhO1FBSmIsQ0FERixDQVArRDtPQUF6RDthQWVSLElBQUMsQ0FBQSxHQUFELENBQUssSUFBQyxDQUFBLElBQU47SUF6Q0s7SUEyQ1AsSUFBSSxDQUFDLFNBQUwsR0FBaUIsSUFBQSxDQUFLLEtBQUssQ0FBQyxRQUFYLENBQUEsQ0FBQTtJQUNqQixJQUFJLENBQUEsU0FBRSxDQUFBLFdBQU4sR0FBb0I7SUFFcEIsSUFBSSxDQUFBLFNBQUUsQ0FBQSxNQUFOLEdBQWUsUUFBQSxDQUFBLENBQUEsRUFBQSxFQTlDakI7O1dBa0RFO0VBcERRLENBQUE7QUE5SkoiLCJzb3VyY2VzQ29udGVudCI6WyIjLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vI1xuIyBWQVJTXG5cbndlYmdsID0gbnVsbFxuZ3VpICAgPSBudWxsXG5cbmFuaW1hdGlvbiA9IHRydWVcbmxvb2tBaGVhZCA9IHRydWVcblxudHViZUdlb21ldHJ5ID0gbnVsbFxuc2NhbGUgPSAxMFxuYmlub3JtYWwgPSBuZXcgVEhSRUUuVmVjdG9yMygpXG5ub3JtYWwgPSBuZXcgVEhSRUUuVmVjdG9yMygpXG5cbiMvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8jXG4jIE1BSU4gKyBJTklUXG5cbmluaXQgPSAtPlxuICB3ZWJnbCA9IG5ldyBXZWJnbCh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KVxuICAkKCcudGhyZWUnKS5hcHBlbmQgd2ViZ2wucmVuZGVyZXIuZG9tRWxlbWVudFxuICAjZ3VpID0gbmV3IChkYXQuR1VJKVxuICAjZ3VpLmNsb3NlKClcbiAgJCh3aW5kb3cpLm9uICdyZXNpemUnLCByZXNpemVIYW5kbGVyXG4gIGFuaW1hdGUoKVxuXG5yZXNpemVIYW5kbGVyID0gLT5cbiAgd2ViZ2wucmVzaXplIHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHRcblxuYW5pbWF0ZSA9IC0+XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSBhbmltYXRlXG4gIHdlYmdsLnJlbmRlcigpXG5cbiQoZG9jdW1lbnQpLnJlYWR5IGluaXRcblxuXG4jLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4jIFRocmVlLmpzIFNjZW5lIEJhc2ljc1xuXG5XZWJnbCA9IGRvIC0+XG5cbiAgV2ViZ2wgPSAod2lkdGgsIGhlaWdodCkgLT5cbiAgICAjIEJhc2ljIHRocmVlLmpzIHNldHVwXG4gICAgQHNjZW5lID0gbmV3IChUSFJFRS5TY2VuZSlcbiAgICAjIHNjZW5lIGNhbVxuICAgIEBjYW1lcmEgPSBuZXcgKFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKSg1MCwgd2lkdGggLyBoZWlnaHQsIDEsIDEwMDAwKVxuICAgIEBjYW1lcmEucG9zaXRpb24ueiA9IDEwMFxuICAgIFxuICAgICNzcGxpbmUgY2FtXG4gICAgQHNwbGluZUNhbWVyYSA9IG5ldyAoVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEpKDg1LCB3aWR0aCAvIGhlaWdodCwgMC4wMSwgMTAwMClcbiAgICBAc2NlbmUuYWRkIEBzcGxpbmVDYW1lcmFcbiAgICBcbiAgICAjIHRoZSByZW5kZXJlclxuICAgIEByZW5kZXJlciA9IG5ldyAoVEhSRUUuV2ViR0xSZW5kZXJlcikoYW50aWFsaWFzOiB0cnVlKVxuICAgIEByZW5kZXJlci5zZXRQaXhlbFJhdGlvKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKVxuICAgIEByZW5kZXJlci5zZXRTaXplIHdpZHRoLCBoZWlnaHRcbiAgICBAcmVuZGVyZXIuc2V0Q2xlYXJDb2xvciAweDAwMDAwMFxuICAgIFxuICAgICMgYWRkIHRoZSB0b29vb29iXG4gICAgQHR1YmUgPSBuZXcgVHViZVxuICAgIEB0dWJlLnBvc2l0aW9uLnNldCAwLCAwLCAwXG4gICAgQHR1YmUuc2NhbGUuc2V0IHNjYWxlLCBzY2FsZSwgc2NhbGVcbiAgICBAc2NlbmUuYWRkIEB0dWJlXG4gICAgXG4gICAgIyBzZXR1cCBwb3N0LXByb2Nlc3NpbmdcbiAgICBAcmVuZGVyZXIuYXV0b0NsZWFyID0gZmFsc2VcbiAgICBAY29tcG9zZXIgPSBuZXcgVEhSRUUuRWZmZWN0Q29tcG9zZXIoQHJlbmRlcmVyKVxuICAgIEBjb21wb3Nlci5hZGRQYXNzIG5ldyBUSFJFRS5SZW5kZXJQYXNzKEBzY2VuZSwgQHNwbGluZUNhbWVyYSlcbiAgICBcbiAgICAjIGFkZCBhIGJsZWFjaCBwYXNzXG4gICAgQHNoYWRlckVmZmVjdCA9IG5ldyBUSFJFRS5TaGFkZXJQYXNzKFRIUkVFLkJsZWFjaEJ5cGFzc1NoYWRlcilcbiAgICBAc2hhZGVyRWZmZWN0LnVuaWZvcm1zW1wib3BhY2l0eVwiXS52YWx1ZSA9IDAuOTVcbiAgICBAY29tcG9zZXIuYWRkUGFzcyBAc2hhZGVyRWZmZWN0XG4gICAgXG4gICAgIyBhZGQgYSBibG9vbSBwYXNzXG4gICAgQGJsb29tRWZmZWN0ID0gbmV3IFRIUkVFLkJsb29tUGFzcygyLjUpXG4gICAgQGNvbXBvc2VyLmFkZFBhc3MgQGJsb29tRWZmZWN0XG4gICAgXG4gICAgIyBhZGQgYSBob3J6IHRpbHQgc2hpZnQgcGFzc1xuICAgIGJsdXJpbmVzcyA9IDEuNVxuICAgIEBoVGlsdFBhc3MgPSBuZXcgVEhSRUUuU2hhZGVyUGFzcyhUSFJFRS5Ib3Jpem9udGFsVGlsdFNoaWZ0U2hhZGVyKVxuICAgIEBoVGlsdFBhc3MudW5pZm9ybXNbJ2gnXS52YWx1ZSA9IGJsdXJpbmVzcyAvICgwLjc1ICogd2lkdGgpXG4gICAgQGhUaWx0UGFzcy51bmlmb3Jtc1snciddLnZhbHVlID0gMC41XG4gICAgQGNvbXBvc2VyLmFkZFBhc3MgQGhUaWx0UGFzc1xuICAgIFxuICAgICMgYWRkIGEgdmVydCB0aXRsZSBzaGlmdCBwYXNzXG4gICAgQHZUaWx0UGFzcyA9IG5ldyBUSFJFRS5TaGFkZXJQYXNzKFRIUkVFLlZlcnRpY2FsVGlsdFNoaWZ0U2hhZGVyKVxuICAgIEB2VGlsdFBhc3MudW5pZm9ybXNbJ3YnXS52YWx1ZSA9IGJsdXJpbmVzcyAvICgwLjc1ICogd2lkdGgpXG4gICAgQHZUaWx0UGFzcy51bmlmb3Jtc1snciddLnZhbHVlID0gMC41XG4gICAgQGNvbXBvc2VyLmFkZFBhc3MgQHZUaWx0UGFzc1xuICAgIFxuICAgICMgQGJva2VoUGFzcyA9IG5ldyBUSFJFRS5Cb2tlaFBhc3MoIEBzY2VuZSwgQHNwbGluZUNhbWVyYSwge1xuICAgICMgICBmb2N1czogMS4wXG4gICAgIyAgIGFwZXJ0dXJlOiAwLjAyNVxuICAgICMgICBtYXhibHVyOiAxLjBcbiAgICAjICAgd2lkdGg6IHdpZHRoXG4gICAgIyAgIGhlaWdodDogaGVpZ2h0XG4gICAgIyB9KVxuICAgICMgQGNvbXBvc2VyLmFkZFBhc3MgQGJva2VoUGFzc1xuICAgIFxuICAgICMgYWRkIGEgZmlsbSBwYXNzXG4gICAgQGZpbG1QYXNzID0gbmV3IFRIUkVFLkZpbG1QYXNzKDAuMjUsIDAuMjUsIDIwNDgsIGZhbHNlKVxuICAgIFxuICAgICMgcmVuZGVyIHRvIHNjcmVlbiBzbyB3ZSBjYW4gc2VlIHNvbWV0aGluZ1xuICAgIEBmaWxtUGFzcy5yZW5kZXJUb1NjcmVlbiA9IHRydWVcbiAgICBAY29tcG9zZXIuYWRkUGFzcyBAZmlsbVBhc3NcbiAgICBcbiAgICByZXR1cm5cblxuICBXZWJnbDo6cmVzaXplID0gKHdpZHRoLCBoZWlnaHQpIC0+XG4gICAgQGNhbWVyYS5hc3BlY3QgPSB3aWR0aCAvIGhlaWdodFxuICAgIEBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpXG4gICAgQHJlbmRlcmVyLnNldFNpemUgd2lkdGgsIGhlaWdodFxuICAgIHJldHVyblxuXG4gIFdlYmdsOjpyZW5kZXIgPSAtPlxuICAgICMgQW5pbWF0ZSBDYW1lcmEgQWxvbmcgU3BsaW5lXG4gICAgdGltZSA9IERhdGUubm93KClcbiAgICBsb29wdGltZSA9IDI1ICogMTAwMFxuICAgIHQgPSB0aW1lICUgbG9vcHRpbWUgLyBsb29wdGltZVxuICAgIHBvcyA9IHR1YmVHZW9tZXRyeS5wYXJhbWV0ZXJzLnBhdGguZ2V0UG9pbnRBdCh0KVxuICAgIHBvcy5tdWx0aXBseVNjYWxhciBzY2FsZVxuICAgIFxuICAgICMgaW50ZXJwb2xhdGlvblxuICAgIHNlZ21lbnRzID0gdHViZUdlb21ldHJ5LnRhbmdlbnRzLmxlbmd0aFxuICAgIHBpY2t0ID0gdCAqIHNlZ21lbnRzXG4gICAgcGljayA9IE1hdGguZmxvb3IocGlja3QpXG4gICAgcGlja05leHQgPSAocGljayArIDEpICUgc2VnbWVudHNcbiAgICBiaW5vcm1hbC5zdWJWZWN0b3JzIHR1YmVHZW9tZXRyeS5iaW5vcm1hbHNbcGlja05leHRdLCB0dWJlR2VvbWV0cnkuYmlub3JtYWxzW3BpY2tdXG4gICAgYmlub3JtYWwubXVsdGlwbHlTY2FsYXIocGlja3QgLSBwaWNrKS5hZGQgdHViZUdlb21ldHJ5LmJpbm9ybWFsc1twaWNrXVxuICAgIGRpciA9IHR1YmVHZW9tZXRyeS5wYXJhbWV0ZXJzLnBhdGguZ2V0VGFuZ2VudEF0KHQpXG4gICAgb2Zmc2V0ID0gNVxuICAgIG5vcm1hbC5jb3B5KGJpbm9ybWFsKS5jcm9zcyBkaXJcbiAgICBcbiAgICAjIFdlIG1vdmUgb24gYSBvZmZzZXQgb24gaXRzIGJpbm9ybWFsXG4gICAgcG9zLmFkZCBub3JtYWwuY2xvbmUoKS5tdWx0aXBseVNjYWxhcihvZmZzZXQpXG4gICAgQHNwbGluZUNhbWVyYS5wb3NpdGlvbi5jb3B5IHBvc1xuICAgIFxuICAgICMgVXNpbmcgYXJjbGVuZ3RoIGZvciBzdGFibGl6YXRpb24gaW4gbG9vayBhaGVhZC5cbiAgICBsb29rQXQgPSB0dWJlR2VvbWV0cnkucGFyYW1ldGVycy5wYXRoLmdldFBvaW50QXQoKHQgKyAzMCAvIHR1YmVHZW9tZXRyeS5wYXJhbWV0ZXJzLnBhdGguZ2V0TGVuZ3RoKCkpICUgMSkubXVsdGlwbHlTY2FsYXIoc2NhbGUpXG4gICAgXG4gICAgIyBDYW1lcmEgT3JpZW50YXRpb24gLSB1cCBvcmllbnRhdGlvbiB2aWEgbm9ybWFsXG4gICAgaWYgIWxvb2tBaGVhZFxuICAgICAgbG9va0F0LmNvcHkocG9zKS5hZGQgZGlyXG4gICAgQHNwbGluZUNhbWVyYS5tYXRyaXgubG9va0F0IEBzcGxpbmVDYW1lcmEucG9zaXRpb24sIGxvb2tBdCwgbm9ybWFsXG4gICAgQHNwbGluZUNhbWVyYS5yb3RhdGlvbi5zZXRGcm9tUm90YXRpb25NYXRyaXggQHNwbGluZUNhbWVyYS5tYXRyaXgsIEBzcGxpbmVDYW1lcmEucm90YXRpb24ub3JkZXJcbiAgICBcbiAgICBAcmVuZGVyZXIucmVuZGVyIEBzY2VuZSwgaWYgYW5pbWF0aW9uID09IHRydWUgdGhlbiBAc3BsaW5lQ2FtZXJhIGVsc2UgQGNhbWVyYVxuICAgIFxuICAgIGlmIEBjb21wb3NlclxuICAgICAgQGNvbXBvc2VyLnJlbmRlcigpXG4gICAgXG4gICAgcmV0dXJuXG5cbiAgV2ViZ2xcblxuXG4jLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4jIFRPT09PT0JcblxuVHViZSA9IGRvIC0+XG5cbiAgVHViZSA9IC0+XG4gICAgVEhSRUUuT2JqZWN0M0QuY2FsbCB0aGlzXG4gICAgZXh0cnVkZVBhdGggPSBuZXcgVEhSRUUuQ3VydmVzLlRyZWZvaWxLbm90KClcbiAgICBzZWdtZW50cyA9IDIwMFxuICAgIHJhZGl1c1NlZ21lbnRzID0gMjBcbiAgICByZXBlYXRYID0gMTBcbiAgICBjbG9zZWQgPSB0cnVlXG4gICAgXG4gICAgdHViZUdlb21ldHJ5ID0gbmV3IChUSFJFRS5UdWJlR2VvbWV0cnkpKGV4dHJ1ZGVQYXRoLCBzZWdtZW50cywgNCwgcmFkaXVzU2VnbWVudHMsIGNsb3NlZClcbiAgICBcbiAgICBUSFJFRS5JbWFnZVV0aWxzLmNyb3NzT3JpZ2luID0gJydcbiAgICB0ZXh0dXJlID0gVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZSggXCJodHRwczovL3MzLXVzLXdlc3QtMi5hbWF6b25hd3MuY29tL3MuY2Rwbi5pby8yMTY5My9ncmlkLXR3by10d28ucG5nXCIgKVxuICAgIHRleHR1cmUubWluRmlsdGVyID0gVEhSRUUuTmVhcmVzdEZpbHRlclxuICAgIHRleHR1cmUud3JhcFMgPSBUSFJFRS5SZXBlYXRXcmFwcGluZ1xuICAgIHRleHR1cmUucmVwZWF0LnggPSByZXBlYXRYXG4gICAgXG4gICAgYWxwaGFUZXh0dXJlID0gVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZShcImh0dHBzOi8vczMtdXMtd2VzdC0yLmFtYXpvbmF3cy5jb20vcy5jZHBuLmlvLzIxNjkzL2dyaWQtdHdvLXR3by1hbHBoYS5wbmdcIilcbiAgICBhbHBoYVRleHR1cmUubWluRmlsdGVyID0gVEhSRUUuTmVhcmVzdEZpbHRlclxuICAgIGFscGhhVGV4dHVyZS53cmFwUyA9IFRIUkVFLlJlcGVhdFdyYXBwaW5nXG4gICAgYWxwaGFUZXh0dXJlLnJlcGVhdC54ID0gcmVwZWF0WFxuICAgIFxuICAgIGdyaWRUZXh0dXJlID0gVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZShcImh0dHBzOi8vczMtdXMtd2VzdC0yLmFtYXpvbmF3cy5jb20vcy5jZHBuLmlvLzIxNjkzL3dpcmUtZ3JpZC5wbmdcIilcbiAgICBncmlkVGV4dHVyZS5taW5GaWx0ZXIgPSBUSFJFRS5OZWFyZXN0RmlsdGVyXG4gICAgZ3JpZFRleHR1cmUud3JhcFMgPSBUSFJFRS5SZXBlYXRXcmFwcGluZ1xuICAgIGdyaWRUZXh0dXJlLnJlcGVhdC54ID0gcmVwZWF0WFxuICAgIFxuICAgIEBtZXNoID0gVEhSRUUuU2NlbmVVdGlscy5jcmVhdGVNdWx0aU1hdGVyaWFsT2JqZWN0KHR1YmVHZW9tZXRyeSwgW1xuICAgICAgbmV3IChUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCkoXG4gICAgICAgIHNpZGU6IFRIUkVFLkRvdWJsZVNpZGVcbiAgICAgICAgbWFwOiBncmlkVGV4dHVyZVxuICAgICAgICAjYWxwaGFNYXA6IGdyaWRUZXh0dXJlXG4gICAgICAgIHRyYW5zcGFyZW50OiB0cnVlKVxuICAgICAgXG4gICAgICBuZXcgKFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKShcbiAgICAgICAgY29sb3I6IDB4QjBFNkUxXG4gICAgICAgIHNpZGU6IFRIUkVFLkJhY2tTaWRlXG4gICAgICAgIG1hcDogdGV4dHVyZVxuICAgICAgICAjYWxwaGFNYXA6IGFscGhhVGV4dHVyZVxuICAgICAgICB0cmFuc3BhcmVudDogZmFsc2UpXG4gICAgXSlcbiAgICBcbiAgICBAYWRkIEBtZXNoXG4gICAgXG4gIFR1YmUucHJvdG90eXBlID0gbmV3IChUSFJFRS5PYmplY3QzRClcbiAgVHViZTo6Y29uc3RydWN0b3IgPSBUdWJlXG5cbiAgVHViZTo6dXBkYXRlID0gLT5cbiAgICAjQG1lc2gucm90YXRpb24ueSArPSAwLjAxXG4gIFxuXG4gIFR1YmUiXX0=
//# sourceURL=coffeescript